function WebcamObject(e,t,a){function i(){var t=$(e).find("video").first()[0],a=$("<canvas></canvas>")[0],i=a.getContext("2d");i.drawImage(t,0,0,a.width,a.height);var n=a.toDataURL();return $(a).remove(),n}function n(){var t=$(e).find("video").first()[0];return t.pause(),e}function s(){var t=$(e).find("video").first()[0];return t.play(),e}function o(){return $(e).empty(),e}var c="undefined"==typeof t?$(e).width():t,r="undefined"==typeof a?$(e).height():a,e=e;return $(e).data("webcam-init")||(navigator.getUserMedia?($(e).append('<p class="webcam-message">Establishing connection to webcam</p>'),navigator.getUserMedia({video:!0,audio:!1},function(t){var a=$("<video></video>");if($(a).width(c),$(a).height(r),navigator.mozGetUserMedia)a[0].mozSrcObject=t;else{var i=window.URL||window.webkitURL;a[0].src=i?i.createObjectURL(t):t}a[0].play(),$(e).empty().append(a)},function(t){$(e).empty().append('<p class="webcam-message">Could not establish connection to the webcam</p>')})):$(e).empty().append('<p class="webcam-message">Could not establish connection to the webcam</p>')),$(e).data("webcam-init",!0),{snapshot:i,stop:stop,play:s,pause:n,destroy:o}}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,$.fn.webcam=function(e){var e="undefined"==typeof e?"auto":e;switch(e.toLowerCase()){case"auto":var t=this;return $(this).data("webcam-init")===!0&&($(this).prop("webcam")===!0||$(this).is("webcam")||$(this).hasClass("webcam"))?t=WebcamObject(this):(($(this).prop("webcam")===!0||$(this).is("webcam")||$(this).hasClass("webcam"))&&WebcamObject(this),$(this).find("webcam, div[webcam], .webcam").each(function(e,t){WebcamObject(t)})),t;default:var a=WebcamObject(this);return"undefined"!=typeof a[e]?a[e]():this}};